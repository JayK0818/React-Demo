{"ast":null,"code":"import { ADD_GOOD, DELETE_GOOD, INCREMENT_GOOD, DECREMENT_GOOD } from '../constant/shopping-cart';\n\nfunction reducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  const {\n    type,\n    payload\n  } = action;\n\n  switch (type) {\n    case ADD_GOOD:\n      {\n        // 判断是否已经添加过, 如果没有添加则新增, 否则新增数量\n        const index = state.findIndex(good => good.id === payload.id);\n\n        if (index === -1) {\n          return [...state, { ...payload,\n            count: 1\n          }];\n        }\n\n        const goods_list = [...state];\n        goods_list[index]['count'] += 1;\n        return goods_list;\n      }\n\n    case DELETE_GOOD:\n      {\n        return state.filter(good => good.id !== payload);\n      }\n\n    case INCREMENT_GOOD:\n      {\n        const index = state.findIndex(good => good.id === payload);\n        if (index < 0) return [...state];\n        const goods_list = [...state];\n        goods_list[index]['count'] += 1;\n        return goods_list;\n      }\n\n    case DECREMENT_GOOD:\n      {\n        const index = state.findIndex(good => good.id === payload);\n        if (index < 0) return [...state];\n        const goods_list = [...state];\n        goods_list[index]['count'] -= 1;\n        return goods_list;\n      }\n\n    default:\n      return state;\n  }\n}\n\nexport default reducer;","map":{"version":3,"names":["ADD_GOOD","DELETE_GOOD","INCREMENT_GOOD","DECREMENT_GOOD","reducer","state","action","type","payload","index","findIndex","good","id","count","goods_list","filter"],"sources":["/Users/jinkang/Desktop/React-Demo/src/store/reducer/shopping-cart.js"],"sourcesContent":["import { ADD_GOOD, DELETE_GOOD, INCREMENT_GOOD, DECREMENT_GOOD } from '../constant/shopping-cart'\n\nfunction reducer(state = [], action) {\n  const { type, payload } = action\n  switch(type) {\n    case ADD_GOOD: {\n      // 判断是否已经添加过, 如果没有添加则新增, 否则新增数量\n      const index = state.findIndex(good => good.id === payload.id)\n      if(index === -1) {\n        return [...state, {...payload, count: 1}]\n      }\n      const goods_list = [...state]\n      goods_list[index]['count'] += 1\n      return goods_list\n    }\n    case DELETE_GOOD: {\n      return state.filter(good => good.id !== payload)\n    }\n    case INCREMENT_GOOD: {\n      const index = state.findIndex(good => good.id === payload)\n      if(index < 0) return [...state]\n      const goods_list = [...state]\n      goods_list[index]['count'] += 1\n      return goods_list\n    }\n    case DECREMENT_GOOD: {\n      const index = state.findIndex(good => good.id === payload)\n      if(index < 0) return [...state]\n      const goods_list = [...state]\n      goods_list[index]['count'] -= 1\n      return goods_list\n    }\n    default:\n      return state\n  }\n}\n\nexport default reducer\n"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,WAAnB,EAAgCC,cAAhC,EAAgDC,cAAhD,QAAsE,2BAAtE;;AAEA,SAASC,OAAT,GAAqC;EAAA,IAApBC,KAAoB,uEAAZ,EAAY;EAAA,IAARC,MAAQ;EACnC,MAAM;IAAEC,IAAF;IAAQC;EAAR,IAAoBF,MAA1B;;EACA,QAAOC,IAAP;IACE,KAAKP,QAAL;MAAe;QACb;QACA,MAAMS,KAAK,GAAGJ,KAAK,CAACK,SAAN,CAAgBC,IAAI,IAAIA,IAAI,CAACC,EAAL,KAAYJ,OAAO,CAACI,EAA5C,CAAd;;QACA,IAAGH,KAAK,KAAK,CAAC,CAAd,EAAiB;UACf,OAAO,CAAC,GAAGJ,KAAJ,EAAW,EAAC,GAAGG,OAAJ;YAAaK,KAAK,EAAE;UAApB,CAAX,CAAP;QACD;;QACD,MAAMC,UAAU,GAAG,CAAC,GAAGT,KAAJ,CAAnB;QACAS,UAAU,CAACL,KAAD,CAAV,CAAkB,OAAlB,KAA8B,CAA9B;QACA,OAAOK,UAAP;MACD;;IACD,KAAKb,WAAL;MAAkB;QAChB,OAAOI,KAAK,CAACU,MAAN,CAAaJ,IAAI,IAAIA,IAAI,CAACC,EAAL,KAAYJ,OAAjC,CAAP;MACD;;IACD,KAAKN,cAAL;MAAqB;QACnB,MAAMO,KAAK,GAAGJ,KAAK,CAACK,SAAN,CAAgBC,IAAI,IAAIA,IAAI,CAACC,EAAL,KAAYJ,OAApC,CAAd;QACA,IAAGC,KAAK,GAAG,CAAX,EAAc,OAAO,CAAC,GAAGJ,KAAJ,CAAP;QACd,MAAMS,UAAU,GAAG,CAAC,GAAGT,KAAJ,CAAnB;QACAS,UAAU,CAACL,KAAD,CAAV,CAAkB,OAAlB,KAA8B,CAA9B;QACA,OAAOK,UAAP;MACD;;IACD,KAAKX,cAAL;MAAqB;QACnB,MAAMM,KAAK,GAAGJ,KAAK,CAACK,SAAN,CAAgBC,IAAI,IAAIA,IAAI,CAACC,EAAL,KAAYJ,OAApC,CAAd;QACA,IAAGC,KAAK,GAAG,CAAX,EAAc,OAAO,CAAC,GAAGJ,KAAJ,CAAP;QACd,MAAMS,UAAU,GAAG,CAAC,GAAGT,KAAJ,CAAnB;QACAS,UAAU,CAACL,KAAD,CAAV,CAAkB,OAAlB,KAA8B,CAA9B;QACA,OAAOK,UAAP;MACD;;IACD;MACE,OAAOT,KAAP;EA7BJ;AA+BD;;AAED,eAAeD,OAAf"},"metadata":{},"sourceType":"module"}